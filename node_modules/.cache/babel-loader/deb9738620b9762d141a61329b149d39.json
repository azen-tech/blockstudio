{"ast":null,"code":"import _regeneratorRuntime from\"/home/azen/Documents/blockstudio-main/App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/azen/Documents/blockstudio-main/App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/azen/Documents/blockstudio-main/App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/azen/Documents/blockstudio-main/App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/azen/Documents/blockstudio-main/App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/azen/Documents/blockstudio-main/App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{COLORS}from\"./Colors\";import Popup from'reactjs-popup';import Loader from\"react-loader-spinner\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faMusic,faFileUpload}from'@fortawesome/free-solid-svg-icons';import Web3 from'web3';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddSongCard=/*#__PURE__*/function(_React$Component){_inherits(AddSongCard,_React$Component);var _super=_createSuper(AddSongCard);function AddSongCard(props){var _this;_classCallCheck(this,AddSongCard);_this=_super.call(this,props);_this.captureFile=function(event){event.preventDefault();var file=event.target.files[0];var file_reader=new FileReader();file_reader.readAsArrayBuffer(file);file_reader.onloadend=function(){_this.setState({buffer:Buffer.from(file_reader.result)});};};_this.onSubmitClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var file,songHash,contractInstance;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!_this.state.buffer){_context.next=13;break;}_this.setState({loading:true});_context.next=5;return _this.props.ipfs.add(_this.state.buffer);case 5:file=_context.sent;songHash=file[\"path\"];_this.setState({hash:songHash});_context.next=10;return _this.props.contract.deployed();case 10:contractInstance=_context.sent;_context.next=13;return contractInstance.addSong(_this.state.name,_this.state.genre,_this.state.hash,_this.web3.utils.toWei(_this.state.cost,'milliether'),{from:_this.props.account}).then(function(){_this.setState({loading:false});_this.props.closeForm();window.location.reload();});case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.web3=new Web3(Web3.givenProvider||\"http://localhost:7545\");_this.state={name:\"\",genre:\"\",cost:\"\",buffer:\"\",hash:\"\",loading:false};return _this;}_createClass(AddSongCard,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(Popup,{open:this.props.form,onClose:function onClose(){_this2.props.closeForm();},modal:true,lockScroll:true,repositionOnResize:true,contentStyle:styles.contentStyle,overlayStyle:styles.overlayStyle,children:this.state.loading?/*#__PURE__*/_jsxs(\"div\",{style:styles.load,children:[\" \",/*#__PURE__*/_jsx(Loader,{type:\"Bars\",color:COLORS.black})]}):/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"h2\",{style:{textAlign:\"center\"},children:[\" \",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faMusic}),\" Add Song \"]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.form,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",style:styles.textInput,placeholder:\"Name\",value:this.state.name,required:true,onChange:function onChange(x){_this2.setState({name:x.target.value});}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",style:styles.textInput,placeholder:\"Genre\",value:this.state.genre,required:true,onChange:function onChange(x){_this2.setState({genre:x.target.value});}}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",style:styles.textInput,placeholder:\"Cost\",value:this.state.cost,required:true,onChange:function onChange(x){_this2.setState({cost:x.target.value});}}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"upload\",children:[\" \",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faFileUpload,size:\"3x\"}),\" \"]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",style:{display:'none'},id:\"upload\",required:true,onChange:this.captureFile})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",onClick:this.onSubmitClick,style:styles.button,value:\"Publish\"})]})});}}]);return AddSongCard;}(React.Component);var styles={load:{height:\"100%\",display:\"flex\",flexDirection:\"column\",justifyContent:\"space-around\",alignItems:\"center\",background:COLORS.brown},contentStyle:{height:\"60%\",width:\"30%\",padding:\"1%\",display:\"flex\",flexDirection:\"column\",justifyContent:\"space-around\",borderRadius:\"15px\",border:\"2px solid\",overflow:\"auto\",borderColor:COLORS.black,backgroundColor:\"#FFFFFF\"},overlayStyle:{backgroundColor:COLORS.blurBlack},arrowStyle:{},form:{marginBottom:\"5%\",marginTop:\"5%\",padding:\"5%\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",borderRadius:\"10px\",border:\"2px solid\",overflow:\"auto\",gap:\"20px\",borderColor:COLORS.black,backgroundColor:COLORS.brown},textInput:{width:\"100%\",borderRadius:\"15px\",padding:\"3%\"},button:{width:\"50%\",marginLeft:\"25%\",padding:\"3%\",borderRadius:\"15px\",border:\"0px\",cursor:\"pointer\",background:COLORS.black,color:COLORS.white}};export default AddSongCard;","map":{"version":3,"sources":["/home/azen/Documents/blockstudio-main/App/src/Components/AddSongCard.js"],"names":["React","COLORS","Popup","Loader","FontAwesomeIcon","faMusic","faFileUpload","Web3","AddSongCard","props","captureFile","event","preventDefault","file","target","files","file_reader","FileReader","readAsArrayBuffer","onloadend","setState","buffer","Buffer","from","result","onSubmitClick","state","loading","ipfs","add","songHash","hash","contract","deployed","contractInstance","addSong","name","genre","web3","utils","toWei","cost","account","then","closeForm","window","location","reload","givenProvider","form","styles","contentStyle","overlayStyle","load","black","textAlign","textInput","x","value","display","button","Component","height","flexDirection","justifyContent","alignItems","background","brown","width","padding","borderRadius","border","overflow","borderColor","backgroundColor","blurBlack","arrowStyle","marginBottom","marginTop","gap","marginLeft","cursor","color","white"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport {COLORS} from \"./Colors\"\nimport Popup from 'reactjs-popup'\nimport Loader from \"react-loader-spinner\"\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faMusic, faFileUpload } from '@fortawesome/free-solid-svg-icons'\nimport Web3 from 'web3'\n\nclass AddSongCard extends React.Component{\n    constructor(props){\n        super(props);\n        this.web3 = new Web3(Web3.givenProvider || \"http://localhost:7545\")\n        this.state = {name : \"\", genre : \"\", cost: \"\", buffer: \"\", hash : \"\", loading: false}\n    }\n    \n    captureFile = (event)=>{\n        event.preventDefault()\n        const file = event.target.files[0]\n        const file_reader = new FileReader()\n        file_reader.readAsArrayBuffer(file)\n        file_reader.onloadend = () =>{\n            this.setState({buffer: Buffer.from(file_reader.result)})\n        }\n    }\n\n    onSubmitClick = async (event)=>{\n        event.preventDefault()\n        if(this.state.buffer){\n            this.setState({ loading: true })\n            const file = await this.props.ipfs.add(this.state.buffer);\n            const songHash = file[\"path\"];\n            this.setState({hash: songHash});\n            const contractInstance = await this.props.contract.deployed()\n            await contractInstance.addSong(this.state.name, this.state.genre, this.state.hash, this.web3.utils.toWei(this.state.cost, 'milliether'), {from:this.props.account}).then(()=>{\n                this.setState({ loading: false })\n                this.props.closeForm()\n                window.location.reload()\n            })\n        }\n    }  \n  \n    render() {\n        return(\n            <Popup \n                open = {this.props.form} \n                onClose = {()=>{this.props.closeForm()}}\n                modal lockScroll repositionOnResize\n                contentStyle={styles.contentStyle} \n                overlayStyle = {styles.overlayStyle}>\n                { this.state.loading\n                ? <div style = {styles.load}> <Loader type = \"Bars\" color = {COLORS.black}/></div>\n                : <form>\n                    <h2 style = {{textAlign:\"center\"}}> <FontAwesomeIcon icon={faMusic}/> Add Song </h2>\n                    <div style = {styles.form} >\n                        <input type=\"text\" style = {styles.textInput} \n                            placeholder =\"Name\"  \n                            value={this.state.name} required\n                            onChange={(x)=>{this.setState({name:x.target.value})}} />\n                        <input type=\"text\" style = {styles.textInput} \n                            placeholder =\"Genre\"  \n                            value={this.state.genre} required\n                            onChange={(x)=>{this.setState({genre:x.target.value})}} />        \n                        <input type=\"number\" style = {styles.textInput} \n                            placeholder =\"Cost\"  \n                            value={this.state.cost} required\n                            onChange={(x)=>{this.setState({cost:x.target.value})}} />\n                        <label htmlFor=\"upload\"> <FontAwesomeIcon icon={faFileUpload} size = \"3x\"/> </label>\n                            <input type=\"file\" style={{display:'none'}} id=\"upload\"required\n                                onChange={this.captureFile}>\n                            </input>\n                    </div>\n                    <input type=\"submit\"  onClick={this.onSubmitClick} style = {styles.button} value=\"Publish\" />\n                </form>\n                }\n            </Popup>\n        )\n    }\n}\n\nconst styles = {\n    load : {\n        height:\"100%\",\n        display:\"flex\", \n        flexDirection:\"column\", \n        justifyContent: \"space-around\", \n        alignItems: \"center\", \n        background:COLORS.brown\n      },\n    contentStyle : {\n        height :\"60%\",\n        width :\"30%\",\n        padding :\"1%\",\n        display:\"flex\", \n        flexDirection:\"column\",\n        justifyContent: \"space-around\", \n        borderRadius:\"15px\",\n        border: \"2px solid\",\n        overflow: \"auto\",\n        borderColor :COLORS.black,\n        backgroundColor:\"#FFFFFF\",\n    },\n    overlayStyle : {\n        backgroundColor : COLORS.blurBlack\n    },\n    arrowStyle : {\n    },\n    form:{\n        marginBottom :\"5%\",\n        marginTop :\"5%\",\n        padding :\"5%\",\n        display:\"flex\", \n        flexDirection:\"column\",\n        alignItems: \"center\", \n        borderRadius:\"10px\",\n        border: \"2px solid\",\n        overflow: \"auto\",\n        gap : \"20px\",\n        borderColor :COLORS.black,\n        backgroundColor:COLORS.brown,\n    },\n    textInput : {\n        width : \"100%\",\n        borderRadius:\"15px\",\n        padding: \"3%\",\n    },\n    button : {\n        width : \"50%\",\n        marginLeft: \"25%\",\n        padding : \"3%\",\n        borderRadius:\"15px\", \n        border:\"0px\", \n        cursor:\"pointer\",\n        background:COLORS.black, \n        color: COLORS.white,\n    },\n  }\n  \nexport default AddSongCard;"]},"metadata":{},"sourceType":"module"}