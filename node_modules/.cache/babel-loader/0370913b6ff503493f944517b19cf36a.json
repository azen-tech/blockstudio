{"ast":null,"code":"var Blockchain = {\n  getBlockByNumber: function getBlockByNumber(blockNumber, provider, callback) {\n    var params = [blockNumber, true];\n    provider.send({\n      jsonrpc: \"2.0\",\n      method: \"eth_getBlockByNumber\",\n      params: params,\n      id: Date.now()\n    }, callback);\n  },\n  getBlockByHash: function getBlockByHash(blockHash, provider, callback) {\n    var params = [blockHash, true];\n    provider.send({\n      jsonrpc: \"2.0\",\n      method: \"eth_getBlockByHash\",\n      params: params,\n      id: Date.now()\n    }, callback);\n  },\n  parse: function parse(uri) {\n    var parsed = {};\n    if (uri.indexOf(\"blockchain://\") !== 0) return parsed;\n    var cleanUri = uri.replace(\"blockchain://\", \"\");\n    var pieces = cleanUri.split(\"/block/\");\n    parsed.genesis_hash = \"0x\".concat(pieces[0]);\n    parsed.block_hash = \"0x\".concat(pieces[1]);\n    return parsed;\n  },\n  asURI: function asURI(provider, callback) {\n    var _this = this;\n\n    var genesis, latest;\n    this.getBlockByNumber(\"0x0\", provider, function (err, _ref) {\n      var result = _ref.result;\n      if (err) return callback(err);\n      genesis = result;\n\n      _this.getBlockByNumber(\"latest\", provider, function (err, _ref2) {\n        var result = _ref2.result;\n        if (err) return callback(err);\n        latest = result;\n        var url = \"blockchain://\".concat(genesis.hash.replace(\"0x\", \"\"), \"/block/\").concat(latest.hash.replace(\"0x\", \"\"));\n        callback(null, url);\n      });\n    });\n  },\n  matches: function matches(uri, provider, callback) {\n    var _this2 = this;\n\n    var parsedUri = this.parse(uri);\n    var expected_genesis = parsedUri.genesis_hash;\n    var expected_block = parsedUri.block_hash;\n    this.getBlockByNumber(\"0x0\", provider, function (err, _ref3) {\n      var result = _ref3.result;\n      if (err) return callback(err);\n      var block = result;\n      if (block.hash !== expected_genesis) return callback(null, false);\n\n      _this2.getBlockByHash(expected_block, provider, function (err, _ref4) {\n        var result = _ref4.result;\n        // Treat an error as if the block didn't exist. This is because\n        // some clients respond differently.\n        var block = result;\n\n        if (err || block == null) {\n          return callback(null, false);\n        }\n\n        callback(null, true);\n      });\n    });\n  }\n};\nmodule.exports = Blockchain;","map":{"version":3,"sources":["/home/azen/Documents/blockstudio-main/App/node_modules/truffle-contract/node_modules/@truffle/blockchain-utils/index.js"],"names":["Blockchain","getBlockByNumber","blockNumber","provider","callback","params","send","jsonrpc","method","id","Date","now","getBlockByHash","blockHash","parse","uri","parsed","indexOf","cleanUri","replace","pieces","split","genesis_hash","block_hash","asURI","genesis","latest","err","result","url","hash","matches","parsedUri","expected_genesis","expected_block","block","module","exports"],"mappings":"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","sourcesContent":["const Blockchain = {\n  getBlockByNumber(blockNumber, provider, callback) {\n    const params = [blockNumber, true];\n    provider.send(\n      {\n        jsonrpc: \"2.0\",\n        method: \"eth_getBlockByNumber\",\n        params,\n        id: Date.now()\n      },\n      callback\n    );\n  },\n\n  getBlockByHash(blockHash, provider, callback) {\n    const params = [blockHash, true];\n    provider.send(\n      {\n        jsonrpc: \"2.0\",\n        method: \"eth_getBlockByHash\",\n        params,\n        id: Date.now()\n      },\n      callback\n    );\n  },\n\n  parse(uri) {\n    const parsed = {};\n    if (uri.indexOf(\"blockchain://\") !== 0) return parsed;\n\n    const cleanUri = uri.replace(\"blockchain://\", \"\");\n\n    const pieces = cleanUri.split(\"/block/\");\n\n    parsed.genesis_hash = `0x${pieces[0]}`;\n    parsed.block_hash = `0x${pieces[1]}`;\n\n    return parsed;\n  },\n\n  asURI(provider, callback) {\n    let genesis, latest;\n\n    this.getBlockByNumber(\"0x0\", provider, (err, { result }) => {\n      if (err) return callback(err);\n      genesis = result;\n\n      this.getBlockByNumber(\"latest\", provider, (err, { result }) => {\n        if (err) return callback(err);\n        latest = result;\n        const url = `blockchain://${genesis.hash.replace(\n          \"0x\",\n          \"\"\n        )}/block/${latest.hash.replace(\"0x\", \"\")}`;\n        callback(null, url);\n      });\n    });\n  },\n\n  matches(uri, provider, callback) {\n    const parsedUri = this.parse(uri);\n\n    const expected_genesis = parsedUri.genesis_hash;\n    const expected_block = parsedUri.block_hash;\n\n    this.getBlockByNumber(\"0x0\", provider, (err, { result }) => {\n      if (err) return callback(err);\n      const block = result;\n      if (block.hash !== expected_genesis) return callback(null, false);\n\n      this.getBlockByHash(expected_block, provider, (err, { result }) => {\n        // Treat an error as if the block didn't exist. This is because\n        // some clients respond differently.\n        const block = result;\n        if (err || block == null) {\n          return callback(null, false);\n        }\n\n        callback(null, true);\n      });\n    });\n  }\n};\n\nmodule.exports = Blockchain;\n"]},"metadata":{},"sourceType":"script"}